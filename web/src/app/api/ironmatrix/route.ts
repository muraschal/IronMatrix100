import { NextResponse } from "next/server";

const ics = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//IronMatrix100//DE
NAME:IronMatrix100
X-WR-CALNAME:IronMatrix100
TIMEZONE-ID:Europe/Berlin
X-WR-TIMEZONE:Europe/Berlin
BEGIN:VTIMEZONE
TZID:Europe/Berlin
X-LIC-LOCATION:Europe/Berlin
BEGIN:STANDARD
TZOFFSETFROM:+0200
TZOFFSETTO:+0100
TZNAME:CET
DTSTART:19701025T030000
RRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU
END:STANDARD
BEGIN:DAYLIGHT
TZOFFSETFROM:+0100
TZOFFSETTO:+0200
TZNAME:CEST
DTSTART:19700329T020000
RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU
END:DAYLIGHT
END:VTIMEZONE
BEGIN:VEVENT
UID:gym-ppl@ironmatrix100
SUMMARY:Gym – PPL (Mo/Mi/Fr)
DTSTART;TZID=Europe/Berlin:20250915T180000
DTEND;TZID=Europe/Berlin:20250915T191500
RRULE:FREQ=WEEKLY;BYDAY=MO,WE,FR;UNTIL=20251223T235900Z
DESCRIPTION:Push/Pull/Legs+Core. Wasser+Salz vorher. Post-WO Kreatin.
END:VEVENT
BEGIN:VEVENT
UID:dinner@ironmatrix100
SUMMARY:Dinner (Warrior Diet)
DTSTART;TZID=Europe/Berlin:20250915T193000
DTEND;TZID=Europe/Berlin:20250915T203000
RRULE:FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;UNTIL=20251223T235900Z
DESCRIPTION:Eine Mahlzeit. Protein hoch, Salz, Gemüse.
END:VEVENT
BEGIN:VEVENT
UID:sauna-thu@ironmatrix100
SUMMARY:Sauna/Kalt (fix)
DTSTART;TZID=Europe/Berlin:20250918T203000
DTEND;TZID=Europe/Berlin:20250918T213000
RRULE:FREQ=WEEKLY;BYDAY=TH;UNTIL=20251223T235900Z
DESCRIPTION:3x12min Sauna, kalt duschen zwischen den Gängen.
END:VEVENT
BEGIN:VEVENT
UID:cardio-sat@ironmatrix100
SUMMARY:Outdoor Cardio Z2
DTSTART;TZID=Europe/Berlin:20250920T100000
DTEND;TZID=Europe/Berlin:20250920T104500
RRULE:FREQ=WEEKLY;BYDAY=SA;UNTIL=20251223T235900Z
DESCRIPTION:Z2, 35–45 min (ab Woche 7: 45–60 min).
END:VEVENT
BEGIN:VEVENT
UID:supps-am@ironmatrix100
SUMMARY:Supplements – Morgens
DTSTART;TZID=Europe/Berlin:20250915T073000
DTEND;TZID=Europe/Berlin:20250915T074000
RRULE:FREQ=DAILY;UNTIL=20251223T235900Z
DESCRIPTION:D3/K2, Omega-3, Elektrolyte.
END:VEVENT
BEGIN:VEVENT
UID:supps-pw@ironmatrix100
SUMMARY:Supplements – Post-Workout
DTSTART;TZID=Europe/Berlin:20250915T191500
DTEND;TZID=Europe/Berlin:20250915T192000
RRULE:FREQ=WEEKLY;BYDAY=MO,WE,FR;UNTIL=20251223T235900Z
DESCRIPTION:Kreatin 5 g, Wasser, optional Whey.
END:VEVENT
BEGIN:VEVENT
UID:supps-pm@ironmatrix100
SUMMARY:Supplements – Abends
DTSTART;TZID=Europe/Berlin:20250915T213000
DTEND;TZID=Europe/Berlin:20250915T214000
RRULE:FREQ=DAILY;UNTIL=20251223T235900Z
DESCRIPTION:Magnesium, Zink, Ashwagandha.
END:VEVENT
BEGIN:VEVENT
UID:breakfast-weekend@ironmatrix100
SUMMARY:Frühstück (Wochenende)
DTSTART;TZID=Europe/Berlin:20250920T103000
DTEND;TZID=Europe/Berlin:20250920T110000
RRULE:FREQ=WEEKLY;BYDAY=SA,SU;UNTIL=20251223T235900Z
DESCRIPTION:Zweite Mahlzeit am Wochenende (erste des Tages).
END:VEVENT
BEGIN:VEVENT
UID:dinner-weekend@ironmatrix100
SUMMARY:Dinner (Wochenende)
DTSTART;TZID=Europe/Berlin:20250920T190000
DTEND;TZID=Europe/Berlin:20250920T200000
RRULE:FREQ=WEEKLY;BYDAY=SA,SU;UNTIL=20251223T235900Z
DESCRIPTION:Zweite Mahlzeit am Wochenende (Dinner).
END:VEVENT
END:VCALENDAR`;

export async function GET() {
  return new NextResponse(ics, {
    headers: {
      "Content-Type": "text/calendar; charset=utf-8",
      "Content-Disposition": "attachment; filename=ironmatrix100.ics",
    },
  });
}
